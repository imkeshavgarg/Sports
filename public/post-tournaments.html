<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Publish Event</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>
        $(document).ready(function () {
            $("#publishBtn").click(function () {
                const emailid = $("#email").val();
                const title = $("#title").val();
                const event_date = $("#date").val();
                const event_time = $("#time").val();
                const address = $("#location").val();
                const city = $("#city").val();
                const sports = $("#category").val();
                const minage = $("#minAge").val();
                const maxage = $("#maxAge").val();
                const lastdate = $("#lastDate").val();
                const fee = $("#fee").val();
                const prize = $("#prize").val();
                const contact = $("#contact").val();

                if (
                    emailid === "" || title === "" || event_date === "" || event_time === "" ||
                    address === "" || city === "" || sports === "" ||
                    minage === "" || maxage === "" || lastdate === "" ||
                    fee === "" || prize === "" || contact === ""
                ) {
                    alert("Please fill in all fields.");
                    return;
                }

                $.ajax({
                    type: "POST",
                    url: "http://localhost:2004/publish-event",
                    data: {
                        emailid,
                        title,
                        event_date,
                        event_time,
                        address,
                        city,
                        sports,
                        minage,
                        maxage,
                        lastdate,
                        fee,
                        prize,
                        contact
                    },
                    success: function (response) {
                        alert("Event Published: " + response);
                        $("#eventForm")[0].reset();
                    },
                    error: function (xhr) {
                        alert("Error: " + xhr.responseText);
                    }
                });
            });
        });
    </script>
<script>
  function showUser(){
    let activeUser=localStorage.getItem("activeUser");
    document.getElementById("email").value=activeUser;
  }
</script>

</head>

<body class="bg-light" onload="showUser();">
    <div class="row ">
        <div class="col-md-12  bg-primary text-white" style="padding:14px 0px 14px 0px;">
            www.sportsdata.com
        </div>
    </div>
    <div class="container my-5">
        <div class="card shadow p-4">
            <h1 class="text-center mb-4 offset-md-0 bg-danger text-white">Publish Events</h1>
            <form id="eventForm">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="email" class="form-label">Email Id</label>
                        <input type="email" id="email" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label for="title" class="form-label">Event Title</label>
                        <input type="text" id="title" class="form-control" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="date" class="form-label">Date</label>
                        <input type="date" id="date" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label for="time" class="form-label">Time</label>
                        <input type="time" id="time" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label for="city" class="form-label">City</label>
                        <input type="text" id="city" class="form-control" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="location" class="form-label">Location/Address</label>
                    <input type="text" id="location" class="form-control" required>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="category" class="form-label">Sports Category</label>
                        <select id="category" class="form-select" required>
                            <option value="">Select</option>
                            <option>Cricket</option>
                            <option>Football</option>
                            <option>Basketball</option>
                            <option>Tennis</option>
                            <option>Badminton</option>
                            <option>Hockey</option>
                            <option>Volleyball</option>
                            <option>Baseball</option>
                            <option>Kabaddi</option>
                            <option>Kho Kho</option>
                            <option>Athletics</option>
                            <option>Shooting</option>
                            <option>Table Tennis</option>
                            <option>Boxing</option>
                            <option>Wrestling</option>
                            <option>Swimming</option>
                            <option>Skating</option>
                            <option>Karate</option>
                            <option>Chess</option>
                            <option>Esports</option>

                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="minAge" class="form-label">Min Age</label>
                        <input type="number" id="minAge" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label for="maxAge" class="form-label">Max Age</label>
                        <input type="number" id="maxAge" class="form-control" required>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="lastDate" class="form-label">Last Date Of Registration</label>
                        <input type="date" id="lastDate" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label for="fee" class="form-label">Fee</label>
                        <input type="number" id="fee" class="form-control" required>
                    </div>
                    <div class="col-md-4">
                        <label for="prize" class="form-label">Prize Money</label>
                        <input type="number" id="prize" class="form-control" required>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="contact" class="form-label">Contact Person</label>
                    <input type="text" id="contact" class="form-control" required>
                </div>

                <div class="text-center">
                    <button type="button" class="btn btn-danger" id="publishBtn">Publish Event</button>

                </div>
            </form>
        </div>
    </div>